# OTUS "best-courses-ever"

## Описание

```
Образовательная платформа с возможность смотреть и редактировать медиа контент.
Пользователи могут редактировать и смотреть созданные курсы.
Пользователи могут создавать собственные курсы.
Курсы содержат описание и наборы занятий.
Список и описание всех курсов (а также описание занятий) доступно всем пользователям.
Также есть возможность добавлять комментарии к занятию и видеть комментарии других пользователей.
Каждое занятие может содержать описание, видео, ссылки, файлы как другой тип ресурсов.
Чтобы у пользователя появился доступ к занятиям несобственного курса, автор курса может добавить пользователя в список разрешеннных аккаунтов.
```

## Установка зависимостей

Для установки зависимостей следует выполнить команду `npm i`.

Для генерации самоподписанного сертификата для локальной разработки следует выполнить команду `npm run generate-cert`.

## Запуск проекта

Для запуска в режиме разработки следует выполнить команду `npm start` или `npm run dev`.

## Запуск линтера

В качестве линтера используется `biome`. Для запуска проверок следует выполнить команду `npm run lint`.

При использовании в vscode потребуется [расширение](https://biomejs.dev/reference/vscode/).

## Запуск тестов

Для запуска тестов следует выполнить команду `npm test`

## Модель данных

### Файл (фрагмент)

- Название (строка, обязательное)
- MIME-тип (строка, обязательное)
- Путь к файлу (строка, обязательное)
- Размер (число, обязательное)
- Дата добавления (дата, обязательное)


### Курс

- Идентификатор (ObjectId, обязательное, уникальное)
- Описание (строка, обязательное)
- Состояние (enum, обязательное)
    Один из:
      - "draft" - черновик, курс отображается только для автора и администратора
      - "published" - курс опубликован, отображается для автора, администратора и пользователей, получивших разрешение
      - "deleted" - курс удален, отображается только для администратора
- Дата удаления (дата, необязательное) - дата удаления курса
- Идентификатор автора курса (ObjectId, обязательное) - идентификатор пользователя, являющегося автором
- Дополнительные ссылки (массив строк, необязательное)
- Обложка (Файл, необязательное)
- Дата добавления (дата, обязательное)
- Теги (массив строк, обязательное)
- Уровень сложности (enum, обязательное)
    Один из:
      - "easy" - легкий
      - "medium" - средний
      - "advanced" - продвинутый

### Урок

- Идентификатор (ObjectId, обязательное, уникальное)
- Заголовок (строка, обязательное)
- Состояние (enum, обязательное)
    Один из:
      - "draft" - черновик, урок отображается только для автора и администратора
      - "published" - урок опубликован, отображается для автора, администратора и пользователей, получивших разрешение
      - "deleted" - урок удален, отображается только для администратора
- Дата удаления (дата, необязательное) - дата удаления урока
- Контент (строка, обязательное, nullable) - markdown-контент урока
- Видео (Файл, необязательное)
- Дополнительные файлы (массив Файлов, обязательное)
- Дополнительные ссылки (массив строк, необязательное)
- Идентификатор родительского курса (ObjectId, обязательное)
- Дата добавления (дата, обязательное)

### Пользователь

- Идентификатор (ObjectId, обязательное, уникальное)
- Электронная почта (строка, обязательное, уникальное)
- Дата регистрации (дата, обязательное)
- Хэш пароля (строка, обязательное)
- Роль пользователя (enum, обязательное)
    Один из:
      - "user" - имеет право просматривать список и описание всех курсов, просматривать полный контент разрешенных курсов, просматривать и оставлять комментарии к разрешенным курсам, просматривать и оставлять комментарии к урокам разрешенных курсов, оценивать разрешенные курсы, оценивать уроки разрешенных курсов.
      - "author" - обладает всеми правами "user", имеет право создавать курсы и уроки, имеет право просматривать, редактировать и удалять свои курсы, имеет право просматривать, редактировать и удалять уроки своих курсов, загружать файлы.
      - "admin" - может выполнять все существующие действия без ограничений.

### Комментарий

- Идентификатор (ObjectId, обязательное, уникальное)
- идентификатор родительской сущности (ObjectId, обязательное) - идентификатор сущности, к которой привязан комментарий
- Тип сущности (enum, обязательное) - тип сущности, к которой привязан комментарий
    Один из:
      - "lesson" - урок
      - "course" - курс
- Идентификатор автора комментария (ObjectId, обязательное)
- Текст (строка, обязательное)
- Дата добавления (дата, обязательное)

### Оценка

- Идентификатор (ObjectId, обязательное, уникальное)
- идентификатор родительской сущности (ObjectId, обязательное) - идентификатор сущности, к которой привязана оценка
- Идентификатор оценивающего (ObjectId, обязательное)
- Тип сущности (enum, обязательное) - тип сущности, к которой привязан комментарий
    Один из:
      - "lesson" - урок
      - "course" - курс
- Значение оценки (число, обязательное)
